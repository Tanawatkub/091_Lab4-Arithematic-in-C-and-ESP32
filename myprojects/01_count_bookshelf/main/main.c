#include <stdio.h>
#include "esp_log.h"
#include "freertos/FreeRTOS.h"
#include "freertos/task.h"

// р╕Бр╕│р╕лр╕Щр╕Фр╕Кр╕╖р╣Ир╕нр╕кр╕│р╕лр╕гр╕▒р╕Ър╣Бр╕кр╕Фр╕Зр╣Гр╕Щ log
static const char *TAG = "BOOKS_COUNT";

void app_main(void)
{
    ESP_LOGI(TAG, "ЁЯУЪ р╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щр╣Вр╕Ыр╕гр╣Бр╕Бр╕гр╕бр╕Щр╕▒р╕Ър╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╕Ър╕Щр╕Кр╕▒р╣Йр╕Щ ЁЯУЪ");
    ESP_LOGI(TAG, "=====================================");
    
    // р╕Ыр╕гр╕░р╕Бр╕▓р╕ир╕Хр╕▒р╕зр╣Бр╕Ыр╕гр╣Ар╕Бр╣Зр╕Ър╕Ир╕│р╕Щр╕зр╕Щр╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕н
    int books_already_on_shelf = 8;    // р╕бр╕╡р╕нр╕вр╕╣р╣Ир╣Ар╕Фр╕┤р╕б 8 р╣Ар╕ер╣Ир╕б
    int books_added_today = 3;         // р╕зр╕▒р╕Щр╕Щр╕╡р╣Йр╣Ар╕нр╕▓р╕бр╕▓р╣Ар╕Юр╕┤р╣Ир╕бр╕нр╕╡р╕Б 3 р╣Ар╕ер╣Ир╕б
    int total_books;                   // р╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╕гр╕зр╕бр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
    int magazines = 3;                 // р╕Щр╕┤р╕Хр╕вр╕кр╕▓р╕гр╕Чр╕╡р╣Ир╕бр╕╡р╣Гр╕Щр╕Кр╕▒р╣Йр╕Щр╣Ар╕Фр╕╡р╕вр╕зр╕Бр╕▒р╕Щ
    int total_all_items;               // р╕гр╕зр╕бр╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕н + р╕Щр╕┤р╕Хр╕вр╕кр╕▓р╕г
    
    // р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ
    ESP_LOGI(TAG, "ЁЯУЦ р╣Вр╕Ир╕Чр╕вр╣М:");
    ESP_LOGI(TAG, "   р╣Ар╕Фр╕┤р╕бр╕Ър╕Щр╕Кр╕▒р╣Йр╕Щр╕бр╕╡р╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕н: %d р╣Ар╕ер╣Ир╕б", books_already_on_shelf);
    ESP_LOGI(TAG, "   р╕зр╕▒р╕Щр╕Щр╕╡р╣Йр╣Ар╕нр╕▓р╕бр╕▓р╣Ар╕Юр╕┤р╣Ир╕бр╕нр╕╡р╕Б: %d р╣Ар╕ер╣Ир╕б", books_added_today);
    ESP_LOGI(TAG, "   тЭУ р╕Хр╕нр╕Щр╕Щр╕╡р╣Йр╕Ър╕Щр╕Кр╕▒р╣Йр╕Щр╕бр╕╡р╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Фр╕Бр╕╡р╣Ир╣Ар╕ер╣Ир╕б?");
    ESP_LOGI(TAG, "");
    
    // р╕гр╕нр╕кр╕▒р╕Бр╕Др╕гр╕╣р╣Ир╣Ар╕Юр╕╖р╣Ир╕нр╣Гр╕лр╣Йр╕нр╣Ир╕▓р╕Щр╣Вр╕Ир╕Чр╕вр╣М
    vTaskDelay(3000 / portTICK_PERIOD_MS);
    
    // р╕Др╕│р╕Щр╕зр╕Ур╕Ьр╕ер╕гр╕зр╕б
    total_books = books_already_on_shelf + books_added_today;
    total_all_items = total_books + magazines;

    // р╣Бр╕кр╕Фр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Щр╕┤р╕Хр╕вр╕кр╕▓р╕г
    ESP_LOGI(TAG, "ЁЯЧЮя╕П р╣Бр╕ер╕░р╕вр╕▒р╕Зр╕бр╕╡р╕Щр╕┤р╕Хр╕вр╕кр╕▓р╕гр╕нр╕╡р╕Б: %d р╣Ар╕ер╣Ир╕б", magazines);
    ESP_LOGI(TAG, "ЁЯУЪ р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф (р╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕н+р╕Щр╕┤р╕Хр╕вр╕кр╕▓р╕г): %d р╕гр╕▓р╕вр╕Бр╕▓р╕г", total_all_items);
    
    // р╣Бр╕кр╕Фр╕Зр╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Бр╕▓р╕гр╕Др╕┤р╕Ф
    ESP_LOGI(TAG, "ЁЯзо р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Бр╕▓р╕гр╕Др╕┤р╕Ф:");
    ESP_LOGI(TAG, "   р╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╣Ар╕Фр╕┤р╕б + р╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╕Чр╕╡р╣Ир╣Ар╕нр╕▓р╣Ар╕Юр╕┤р╣Ир╕б");
    ESP_LOGI(TAG, "   = %d + %d", books_already_on_shelf, books_added_today);
    ESP_LOGI(TAG, "   = %d р╣Ар╕ер╣Ир╕б", total_books);
    ESP_LOGI(TAG, "");
    
    // р╣Бр╕кр╕Фр╕Зр╕Др╕│р╕Хр╕нр╕Ъ
    ESP_LOGI(TAG, "тЬЕ р╕Др╕│р╕Хр╕нр╕Ъ:");
    ESP_LOGI(TAG, "   р╕Хр╕нр╕Щр╕Щр╕╡р╣Йр╕бр╕╡р╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф %d р╣Ар╕ер╣Ир╕б", total_books);
    ESP_LOGI(TAG, "");
    
    // р╣Бр╕кр╕Фр╕Зр╕ар╕▓р╕Юр╕Ыр╕гр╕░р╕Бр╕нр╕Ъ (ASCII Art)
    ESP_LOGI(TAG, "ЁЯОи р╕ар╕▓р╕Юр╕Ыр╕гр╕░р╕Бр╕нр╕Ъ:");
    ESP_LOGI(TAG, "   р╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╣Ар╕Фр╕┤р╕б: ЁЯУШЁЯУШЁЯУШЁЯУШ (%d р╣Ар╕ер╣Ир╕б)", books_already_on_shelf);
    ESP_LOGI(TAG, "   р╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╣Гр╕лр╕бр╣И: ЁЯУХЁЯУХ (%d р╣Ар╕ер╣Ир╕б)", books_added_today);
    ESP_LOGI(TAG, "   р╕гр╕зр╕б:        ЁЯУЧЁЯУЧЁЯУЧЁЯУЧЁЯУЧЁЯУЧ (%d р╣Ар╕ер╣Ир╕б)", total_books);
    ESP_LOGI(TAG, "");
    
    // р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б
    ESP_LOGI(TAG, "ЁЯТб р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б:");
    
    // р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Чр╕╡р╣И 1
    int example1_old = 7;
    int example1_new = 3;
    int example1_total = example1_old + example1_new;
    ESP_LOGI(TAG, "   р╕Цр╣Йр╕▓р╕бр╕╡р╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з %d р╣Ар╕ер╣Ир╕б р╣Бр╕ер╕░р╣Ар╕Юр╕┤р╣Ир╕бр╕нр╕╡р╕Б %d р╣Ар╕ер╣Ир╕б", example1_old, example1_new);
    ESP_LOGI(TAG, "   р╕Ир╕░р╣Др╕Фр╣Йр╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф %d + %d = %d р╣Ар╕ер╣Ир╕б", example1_old, example1_new, example1_total);
    ESP_LOGI(TAG, "");
    
    // р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Чр╕╡р╣И 2
    int example2_old = 10;
    int example2_new = 5;
    int example2_total = example2_old + example2_new;
    ESP_LOGI(TAG, "   р╕Цр╣Йр╕▓р╕бр╕╡р╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╕нр╕вр╕╣р╣Ир╣Бр╕ер╣Йр╕з %d р╣Ар╕ер╣Ир╕б р╣Бр╕ер╕░р╣Ар╕Юр╕┤р╣Ир╕бр╕нр╕╡р╕Б %d р╣Ар╕ер╣Ир╕б", example2_old, example2_new);
    ESP_LOGI(TAG, "   р╕Ир╕░р╣Др╕Фр╣Йр╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф %d + %d = %d р╣Ар╕ер╣Ир╕б", example2_old, example2_new, example2_total);
    ESP_LOGI(TAG, "");
    
    // р╕кр╕гр╕╕р╕Ыр╕Бр╕▓р╕гр╣Ар╕гр╕╡р╕вр╕Щр╕гр╕╣р╣Й
    ESP_LOGI(TAG, "ЁЯУЪ р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╣Ар╕гр╕╡р╕вр╕Щр╕гр╕╣р╣Й:");
    ESP_LOGI(TAG, "   1. р╕Бр╕▓р╕гр╕Ър╕зр╕Бр╣Ар╕ер╕В (Addition): a + b = c");
    ESP_LOGI(TAG, "   2. р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Хр╕▒р╕зр╣Бр╕Ыр╕г (Variables) р╣Ар╕Бр╣Зр╕Ър╕Др╣Ир╕▓");
    ESP_LOGI(TAG, "   3. р╕Бр╕▓р╕гр╣Бр╕кр╕Фр╕Зр╕Ьр╕ер╕Фр╣Йр╕зр╕в ESP_LOGI");
    ESP_LOGI(TAG, "   4. р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╣Вр╕Ир╕Чр╕вр╣Мр╣Бр╕Ър╕Ър╕бр╕╡р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щ");
    ESP_LOGI(TAG, "");
    
    ESP_LOGI(TAG, "ЁЯОЙ р╕Ир╕Ър╣Вр╕Ыр╕гр╣Бр╕Бр╕гр╕бр╕Щр╕▒р╕Ър╕лр╕Щр╕▒р╕Зр╕кр╕╖р╕нр╕Ър╕Щр╕Кр╕▒р╣Йр╕Щ!");
    ESP_LOGI(TAG, "ЁЯУЦ р╕нр╣Ир╕▓р╕Щр╕Хр╣Ир╕нр╣Гр╕Щр╣Вр╕Ыр╕гр╣Ар╕Ир╕Др╕Цр╕▒р╕Фр╣Др╕Ы: 02_subtraction_toys");
    
    // р╕гр╕нр╕кр╕▒р╕Бр╕Др╕гр╕╣р╣Ир╕Бр╣Ир╕нр╕Щр╕Ир╕Ър╣Вр╕Ыр╕гр╣Бр╕Бр╕гр╕б
    vTaskDelay(2000 / portTICK_PERIOD_MS);
}
